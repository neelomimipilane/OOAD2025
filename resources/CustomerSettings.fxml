<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.geometry.Insets?>

<VBox xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="CustomerSettingsController"
      spacing="15" style="-fx-padding: 20;" prefWidth="600" prefHeight="700">

    <Label text="Account Settings" style="-fx-font-size: 24; -fx-font-weight: bold;"/>

    <Label fx:id="customerNameLabel" text="Settings for Customer" style="-fx-font-size: 16;"/>

    <TabPane tabClosingPolicy="UNAVAILABLE">
        <!-- Personal Information Tab -->
        <Tab text="Personal Information">
            <VBox spacing="10" style="-fx-padding: 15;">
                <Label text="Update Your Information" style="-fx-font-size: 16; -fx-font-weight: bold;"/>

                <GridPane hgap="10" vgap="10">
                    <Label text="First Name:" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                    <TextField fx:id="firstnameField" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                    <Label text="Surname:" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                    <TextField fx:id="surnameField" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                    <Label text="Address:" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                    <TextField fx:id="addressField" GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                    <Label text="Email:" GridPane.columnIndex="0" GridPane.rowIndex="3"/>
                    <TextField fx:id="emailField" GridPane.columnIndex="1" GridPane.rowIndex="3"/>

                    <Label text="Current Password:" GridPane.columnIndex="0" GridPane.rowIndex="4"/>
                    <PasswordField fx:id="currentPasswordField" GridPane.columnIndex="1" GridPane.rowIndex="4"/>
                </GridPane>

                <HBox spacing="10">
                    <Button text="Update Information" onAction="#handleUpdateInfo"
                            style="-fx-background-color: #4CAF50; -fx-text-fill: white;"/>
                    <Button text="Update Email Only" onAction="#handleUpdateEmail"
                            style="-fx-background-color: #2196F3; -fx-text-fill: white;"/>
                    <Button text="Update Address Only" onAction="#handleUpdateAddress"
                            style="-fx-background-color: #2196F3; -fx-text-fill: white;"/>
                </HBox>
            </VBox>
        </Tab>

        <!-- Change Password Tab -->
        <Tab text="Change Password">
            <VBox spacing="10" style="-fx-padding: 15;">
                <Label text="Change Your Password" style="-fx-font-size: 16; -fx-font-weight: bold;"/>

                <GridPane hgap="10" vgap="10">
                    <Label text="Current Password:" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                    <PasswordField fx:id="currentPasswordField2" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                    <Label text="New Password:" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                    <PasswordField fx:id="newPasswordField" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                    <Label text="Confirm New Password:" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                    <PasswordField fx:id="confirmPasswordField" GridPane.columnIndex="1" GridPane.rowIndex="2"/>
                </GridPane>

                <Button text="Change Password" onAction="#handleChangePassword"
                        style="-fx-background-color: #FF9800; -fx-text-fill: white;"/>
            </VBox>
        </Tab>

        <!-- Account Management Tab -->
        <Tab text="Account Management">
            <VBox spacing="10" style="-fx-padding: 15;">
                <Label text="Manage Your Accounts" style="-fx-font-size: 16; -fx-font-weight: bold;"/>

                <TextArea fx:id="customerInfoArea" prefRowCount="15" prefWidth="550"
                          editable="false" wrapText="true"/>

                <Button text="Refresh Information" onAction="#handleRefreshInfo"
                        style="-fx-background-color: #607D8B; -fx-text-fill: white;"/>
            </VBox>
        </Tab>

        <!-- Close Account Tab -->
        <Tab text="Close Account">
            <VBox spacing="15" style="-fx-padding: 15;">
                <Label text="Close Your Account" style="-fx-font-size: 16; -fx-font-weight: bold; -fx-text-fill: red;"/>

                <Label text="WARNING: This action is permanent and cannot be undone!"
                       style="-fx-font-weight: bold; -fx-text-fill: red;"/>

                <Label text="All your accounts, transactions, and personal information will be permanently deleted."
                       wrapText="true"/>

                <Label text="Enter your password to confirm:"/>
                <PasswordField fx:id="deletePasswordField" prefWidth="300"/>

                <Button text="DELETE MY ACCOUNT" onAction="#handleDeleteAccount"
                        style="-fx-background-color: #f44336; -fx-text-fill: white; -fx-font-weight: bold;"/>
            </VBox>
        </Tab>
    </TabPane>

    <Button text="Close" onAction="#handleClose"
            style="-fx-background-color: #9E9E9E; -fx-text-fill: white;"/>
</VBox>